{"version":3,"sources":["main.js"],"names":["canvas","document","getElementById","width","documentElement","clientWidth","height","clientHeight","last","painting","isTouchDevice","currentColor","currentLineWidth","setColor","listenButtonClick","ctx","getContext","addActive","querySelector","drawOnDevicesMap","drawLineOnDevices","drawLineOnTouchDevice","drawLineOnClickDevice","drawRectOnDevices","drawRectOnTouchDevice","drawRectOnClickDevice","drawArcOnDevices","drawArcOnTouchDevice","drawArcOnClickDevice","drawTriangleOnDevices","drawTriangleOnTouchDevice","drawTriangleOnClickDevice","clearOnDevices","clearOnTouchDevice","clearOnClickDevice","btn","btns","querySelectorAll","body","style","cursor","classList","contains","console","log","i","length","remove","add","smallBtn","mediumBtn","bigBtn","rectBtn","arcBtn","triangleBtn","triangle90Btn","smallEraserBtn","mediumEraserBtn","bigEraserBtn","onclick","e","currentTarget","dataset","size","colorInput","value","oninput","target","drawLine","x1","x2","y1","y2","strokeStyle","lineWidth","lineJoin","lineCap","beginPath","moveTo","lineTo","stroke","closePath","ontouchstart","touches","clientX","clientY","ontouchmove","x","y","onmousemove","onmousedown","onmouseup","lastWidth","lastHeight","clearRect","strokeRect","ontouchend","drawArc","radius","arc","Math","PI","currentX","currentY","currentRadius","undefined","drawTriangle","is90","secondPointX","secondPointY","clearPointX","clearPointY","clearWidth","clearHeight"],"mappings":"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","file":"main.74ba8820.js","sourceRoot":"..\\src","sourcesContent":["//初始化\r\nlet canvas = document.getElementById(\"canvas\");\r\ncanvas.width = document.documentElement.clientWidth;\r\ncanvas.height = document.documentElement.clientHeight;\r\nlet painting = false;\r\nlet isTouchDevice = \"ontouchstart\" in document.documentElement;\r\nlet last;\r\nlet currentColor = \"black\"\r\nlet currentLineWidth = 6;\r\n//设置颜色\r\nsetColor();\r\n//监听按钮点击事件\r\nlistenButtonClick();\r\n//初始化画板\r\nlet ctx = canvas.getContext(\"2d\");\r\naddActive(document.querySelector(\"#medium\"))\r\n\r\nconst drawOnDevicesMap = {\r\n    drawLineOnDevices: isTouchDevice ? drawLineOnTouchDevice : drawLineOnClickDevice,\r\n    drawRectOnDevices: isTouchDevice ? drawRectOnTouchDevice : drawRectOnClickDevice,\r\n    drawArcOnDevices: isTouchDevice ? drawArcOnTouchDevice : drawArcOnClickDevice,\r\n    drawTriangleOnDevices: isTouchDevice ? drawTriangleOnTouchDevice : drawTriangleOnClickDevice,\r\n    clearOnDevices: isTouchDevice ? clearOnTouchDevice : clearOnClickDevice\r\n}\r\ndrawOnDevicesMap[\"drawLineOnDevices\"]()\r\n//添加active类\r\nfunction addActive(btn) {\r\n    const btns = document.querySelectorAll(\"button\")\r\n    document.body.style.cursor = \"grabbing\"\r\n    if (btn.classList.contains(\"eraser\")) {\r\n        console.log(\"lai\")\r\n        document.body.style.cursor = \"cell\"\r\n    }\r\n    for (let i = 0; i < btns.length; i++) {\r\n        if (btns[i].classList.contains(\"active\")) {\r\n\r\n            btns[i].classList.remove(\"active\")\r\n        }\r\n    }\r\n    btn.classList.add(\"active\")\r\n}\r\n\r\n//监听按钮点击事件\r\nfunction listenButtonClick() {\r\n    const smallBtn = document.getElementById(\"small\")\r\n    const mediumBtn = document.getElementById(\"medium\")\r\n    const bigBtn = document.getElementById(\"big\")\r\n    const rectBtn = document.getElementById(\"rect\")\r\n    const arcBtn = document.getElementById(\"arc\")\r\n    const triangleBtn = document.getElementById(\"triangle\")\r\n    const triangle90Btn = document.getElementById(\"triangle-90\")\r\n    const smallEraserBtn = document.getElementById(\"smallEraser\")\r\n    const mediumEraserBtn = document.getElementById(\"mediumEraser\")\r\n    const bigEraserBtn = document.getElementById(\"bigEraser\")\r\n    smallBtn.onclick = e => {\r\n        currentLineWidth = e.currentTarget.dataset.size;\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"drawLineOnDevices\"]();\r\n    }\r\n    mediumBtn.onclick = e => {\r\n        currentLineWidth = e.currentTarget.dataset.size;\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"drawLineOnDevices\"]();\r\n    }\r\n    bigBtn.onclick = e => {\r\n        currentLineWidth = e.currentTarget.dataset.size;\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"drawLineOnDevices\"]();\r\n    }\r\n    rectBtn.onclick = e => {\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"drawRectOnDevices\"]();\r\n    }\r\n    arcBtn.onclick = e => {\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"drawArcOnDevices\"]();\r\n    }\r\n    triangleBtn.onclick = e => {\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"drawTriangleOnDevices\"](false);\r\n    }\r\n    triangle90Btn.onclick = e => {\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"drawTriangleOnDevices\"](true);\r\n    }\r\n    smallEraserBtn.onclick = e => {\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"clearOnDevices\"](50);\r\n    }\r\n    mediumEraserBtn.onclick = e => {\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"clearOnDevices\"](100);\r\n    }\r\n    bigEraserBtn.onclick = e => {\r\n        addActive(e.currentTarget)\r\n        drawOnDevicesMap[\"clearOnDevices\"](150);\r\n    }\r\n}\r\n\r\n//设置颜色\r\nfunction setColor() {\r\n    const colorInput = document.getElementById(\"color\")\r\n    currentColor = colorInput.value;\r\n    colorInput.oninput = e => {\r\n        currentColor = e.target.value;\r\n    }\r\n}\r\n\r\n//绘制线\r\nfunction drawLine(x1, x2, y1, y2) {\r\n    ctx.strokeStyle = currentColor;\r\n    ctx.lineWidth = currentLineWidth;\r\n    ctx.lineJoin = \"round\";\r\n    ctx.lineCap = \"round\";\r\n    ctx.beginPath();\r\n    ctx.moveTo(x1, x2);\r\n    ctx.lineTo(y1, y2);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n}\r\n\r\n//在触摸屏上绘制线\r\nfunction drawLineOnTouchDevice() {\r\n    canvas.ontouchstart = (e) => {\r\n        last = [e.touches[0].clientX, e.touches[0].clientY];\r\n    }\r\n    canvas.ontouchmove = (e) => {\r\n        let x = e.touches[0].clientX;\r\n        let y = e.touches[0].clientY;\r\n        drawLine(last[0], last[1], x, y);\r\n        last = [x, y];\r\n    }\r\n}\r\n\r\n//在非触摸屏上绘制线\r\nfunction drawLineOnClickDevice() {\r\n    canvas.onmousemove = (e) => {\r\n        if (painting === true) {\r\n            drawLine(last[0], last[1], e.clientX, e.clientY);\r\n            last = [e.clientX, e.clientY];\r\n        }\r\n    }\r\n    canvas.onmousedown = (e) => {\r\n        last = [e.clientX, e.clientY];\r\n        painting = true;\r\n    }\r\n    canvas.onmouseup = () => {\r\n        painting = false;\r\n    }\r\n}\r\n\r\n//在触摸屏上绘制矩形\r\nfunction drawRectOnTouchDevice() {\r\n    let lastWidth;\r\n    let lastHeight;\r\n    ctx.lineWidth = 2;\r\n    canvas.ontouchstart = (e) => {\r\n        ctx.strokeStyle = currentColor;\r\n        last = [e.touches[0].clientX, e.touches[0].clientY];\r\n    }\r\n    canvas.ontouchmove = (e) => {\r\n        let x = e.touches[0].clientX;\r\n        let y = e.touches[0].clientY;\r\n        ctx.clearRect(last[0], last[1], lastWidth, lastHeight);\r\n        ctx.strokeRect(last[0], last[1], x - last[0], y - last[1]);\r\n        lastWidth = x - last[0];\r\n        lastHeight = y - last[1]\r\n    }\r\n    canvas.ontouchend = e => {\r\n        if (e.touches.length > 0) {\r\n            ctx.strokeRect(last[0], last[1], e.touches[0].clientX - last[0], e.touches[0].clientY - last[1]);\r\n        }\r\n    }\r\n}\r\n\r\n//在非触摸屏上绘制矩形\r\nfunction drawRectOnClickDevice() {\r\n    let lastWidth;\r\n    let lastHeight;\r\n    ctx.lineWidth = 2;\r\n    canvas.onmousemove = (e) => {\r\n        if (painting === true) {\r\n            ctx.clearRect(last[0], last[1], lastWidth, lastHeight);\r\n            ctx.strokeRect(last[0], last[1], e.clientX - last[0], e.clientY - last[1]);\r\n            lastWidth = e.clientX - last[0];\r\n            lastHeight = e.clientY - last[1]\r\n        }\r\n    }\r\n    canvas.onmousedown = (e) => {\r\n        ctx.strokeStyle = currentColor;\r\n        last = [e.clientX, e.clientY];\r\n        painting = true;\r\n    }\r\n    canvas.onmouseup = e => {\r\n        ctx.strokeRect(last[0], last[1], e.clientX - last[0], e.clientY - last[1]);\r\n        painting = false;\r\n    }\r\n}\r\n\r\n//绘制圆形\r\nfunction drawArc(e) {\r\n    ctx.lineWidth = 2;\r\n    ctx.strokeStyle = currentColor;\r\n    ctx.beginPath();\r\n    let x;\r\n    let y;\r\n    let radius;\r\n    if (isTouchDevice) {\r\n        x = last[0] + (e.touches[0].clientX - last[0]) / 2;\r\n        y = last[1] + (e.touches[0].clientY - last[1]) / 2;\r\n        radius = (e.touches[0].clientX - last[0]) / 2;\r\n    } else {\r\n        x = last[0] + (e.clientX - last[0]) / 2;\r\n        y = last[1] + (e.clientY - last[1]) / 2;\r\n        radius = (e.clientX - last[0]) / 2;\r\n    }\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    ctx.stroke();\r\n\r\n}\r\n\r\n//在触摸屏上绘制圆形\r\nfunction drawArcOnTouchDevice() {\r\n    let currentX;\r\n    let currentY;\r\n    let currentRadius;\r\n    canvas.ontouchstart = (e) => {\r\n        last = [e.touches[0].clientX, e.touches[0].clientY];\r\n    }\r\n    canvas.ontouchmove = (e) => {\r\n        ctx.clearRect(currentX - currentRadius, currentY - currentRadius, currentRadius * 2, currentRadius * 2);\r\n        currentX = last[0] + (e.touches[0].clientX - last[0]) / 2;\r\n        currentY = last[1] + (e.touches[0].clientY - last[1]) / 2;\r\n        currentRadius = (e.touches[0].clientX - last[0]) / 2 + 2;\r\n        drawArc(e)\r\n    }\r\n    canvas.ontouchend = e => {\r\n        if (e.touches.length > 0) {\r\n            drawArc(e)\r\n        }\r\n        currentRadius = undefined;\r\n    }\r\n}\r\n//在非触摸屏上绘制圆形\r\nfunction drawArcOnClickDevice() {\r\n    let currentX;\r\n    let currentY;\r\n    let currentRadius;\r\n    canvas.onmousemove = (e) => {\r\n        if (painting === true) {\r\n            ctx.clearRect(currentX - currentRadius, currentY - currentRadius, currentRadius * 2, currentRadius * 2);\r\n            currentX = last[0] + (e.clientX - last[0]) / 2;\r\n            currentY = last[1] + (e.clientY - last[1]) / 2;\r\n            currentRadius = (e.clientX - last[0]) / 2 + 2;\r\n            drawArc(e)\r\n        }\r\n    }\r\n    canvas.onmousedown = (e) => {\r\n        last = [e.clientX, e.clientY];\r\n        painting = true;\r\n    }\r\n    canvas.onmouseup = e => {\r\n        drawArc(e)\r\n        painting = false;\r\n        currentRadius = undefined;\r\n    }\r\n}\r\n\r\n//绘制三角形\r\nfunction drawTriangle(e, is90) {\r\n    ctx.beginPath();\r\n    ctx.lineWidth = 2;\r\n    ctx.strokeStyle = currentColor;\r\n    ctx.moveTo(last[0], last[1])\r\n    let x;\r\n    let y;\r\n    let secondPointX\r\n    if (isTouchDevice) {\r\n        x = e.touches[0].clientX;\r\n        y = e.touches[0].clientY;\r\n    } else {\r\n        x = e.clientX;\r\n        y = e.clientY;\r\n    }\r\n    if (is90) {\r\n        secondPointX = last[0]\r\n    } else {\r\n        secondPointX = last[0] - (x - last[0])\r\n    }\r\n    let secondPointY = y\r\n    ctx.lineTo(secondPointX, secondPointY)\r\n    ctx.lineTo(x, y);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n\r\n//在非触摸屏上绘制三角形\r\nfunction drawTriangleOnClickDevice(is90) {\r\n    let clearPointX\r\n    let clearPointY\r\n    let clearWidth\r\n    let clearHeight\r\n    canvas.onmousemove = (e) => {\r\n        if (painting === true) {\r\n            ctx.clearRect(clearPointX, clearPointY, clearWidth, clearHeight)\r\n            let secondPointX\r\n            if (is90) {\r\n                secondPointX = last[0]\r\n            } else {\r\n                secondPointX = last[0] - (e.clientX - last[0])\r\n            }\r\n            drawTriangle(e, is90)\r\n            clearPointX = secondPointX - 1;\r\n            clearPointY = last[1] - 1\r\n            clearWidth = e.clientX - secondPointX + 2;\r\n            clearHeight = e.clientY - last[1] + 2\r\n        }\r\n    }\r\n    canvas.onmousedown = (e) => {\r\n        last = [e.clientX, e.clientY];\r\n        painting = true;\r\n    }\r\n    canvas.onmouseup = e => {\r\n        drawTriangle(e, is90)\r\n        //如果不设为 undefined，那么会导致画布上只能画出一个三角形\r\n        clearPointX = undefined\r\n        painting = false;\r\n    }\r\n}\r\n\r\n//在触摸屏上绘制三角形\r\nfunction drawTriangleOnTouchDevice(is90) {\r\n    let clearPointX\r\n    let clearPointY\r\n    let clearWidth\r\n    let clearHeight\r\n    canvas.ontouchstart = (e) => {\r\n        last = [e.touches[0].clientX, e.touches[0].clientY];\r\n    }\r\n    canvas.ontouchmove = (e) => {\r\n        ctx.clearRect(clearPointX, clearPointY, clearWidth, clearHeight)\r\n        let secondPointX;\r\n        if (is90) {\r\n            secondPointX = last[0]\r\n        } else {\r\n            secondPointX = last[0] - (e.touches[0].clientX - last[0])\r\n        }\r\n        drawTriangle(e, is90)\r\n        clearPointX = secondPointX - 2;\r\n        clearPointY = last[1] - 2\r\n        clearWidth = e.touches[0].clientX - secondPointX + 2;\r\n        clearHeight = e.touches[0].clientY - last[1] + 2\r\n    }\r\n    canvas.ontouchend = e => {\r\n        if (e.touches.length > 0) {\r\n            drawTriangle(e, is90)\r\n        }\r\n        clearPointX = undefined\r\n    }\r\n}\r\n\r\n//在非触摸屏上-橡皮擦\r\nfunction clearOnClickDevice(width) {\r\n    canvas.onmousemove = (e) => {\r\n        if (painting) {\r\n            ctx.clearRect(e.clientX - width / 2, e.clientY - width / 2, width, width)\r\n        }\r\n    }\r\n    canvas.onmousedown = () => {\r\n        painting = true\r\n    }\r\n    canvas.onmouseup = () => {\r\n        painting = false;\r\n    }\r\n}\r\n\r\n// 在触摸屏上-橡皮擦\r\nfunction clearOnTouchDevice(width) {\r\n    canvas.ontouchmove = (e) => {\r\n        ctx.clearRect(e.touches[0].clientX - width / 2, e.touches[0].clientY - width / 2, width, width)\r\n    }\r\n}"]}